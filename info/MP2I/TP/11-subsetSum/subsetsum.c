/* Des exemples pour subsetSum */

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include "dynArray.h"
#include <stdbool.h>

/* true */
int e0[4] = {5, 3, 7, 5};
int len0 = 4;
int t0 = 13;

/* false */
int e1[4] = {5, 3, 7, 5};
int len1 = 4;
int t1 = 14;


/* true */
int e2[4] = {3, 1, 1, 5};
int len2 = 4;
int t2 = 2;


/* true */
int e3[3] = {2, 1, 2};
int len3 = 3;
int t3 = 4;


/* false */
int e4[4] = {4, 7, 4, 5};
int len4 = 4;
int t4 = 14;


/* false */
int e5[20] = {14, 10, 11, 19, 20, 20, 17, 16, 14, 18, 18, 
              13, 11, 14, 17, 17, 19, 12, 15, 12
  };
int len5 = 20;
int t5 = 298;


/* Moyennement long, true */
int e6[60] = {867, 13, 644, 108, 996, 997, 594, 121, 726, 420, 298, 
              593, 231, 692, 996, 382, 364, 252, 770, 386, 
              576, 485, 796, 825, 945, 791, 702, 338, 384, 400, 
              707, 717, 242, 837, 727, 527, 854, 81, 41, 4, 
              841, 569, 718, 729, 592, 541, 24, 103, 181, 184, 
              93, 898, 270, 697, 953, 811, 972, 531, 602, 382
  };
int len6 = 60;
int t6 = 31846;

/* Moyennement long, false */
int e7[60] = {867, 13, 644, 108, 996, 997, 594, 121, 726, 420, 298, 
              593, 231, 692, 996, 382, 364, 252, 770, 386, 
              576, 485, 796, 825, 945, 791, 702, 338, 384, 400, 
              707, 717, 242, 837, 727, 527, 854, 81, 41, 4, 
              841, 569, 718, 729, 592, 541, 24, 103, 181, 184, 
              93, 898, 270, 697, 953, 811, 972, 531, 602, 382
  };
int len7 = 60;
int t7 = 31847;


/* long, true */
int e8[200] = {
  9470, 7005, 4828, 4286, 4535, 5827, 5782, 3427, 463, 3265, 205, 
  3930, 5462, 3802, 9264, 1196, 2099, 4463, 9255, 1714, 4282, 2675, 5733, 6419, 
  5837, 391, 425, 7937, 2451, 3700, 6854, 442, 4010, 9607, 4090, 1238, 9582, 
  174, 7688, 5726, 268, 5164, 9862, 8834, 2233, 8646, 3167, 2913, 8294, 409, 
  5038, 1481, 4085, 8802, 982, 5293, 7414, 3404, 404, 5171, 9526, 834, 2035, 
  4461, 1075, 2474, 5165, 3199, 2173, 5153, 5106, 2375, 9627, 7296, 8717, 6497, 
  9522, 7076, 7514, 4125, 800, 5481, 9437, 6545, 2502, 7830, 3904, 1420, 3004, 
  4487, 6405, 9112, 986, 7880, 8373, 1346, 7636, 3186, 198, 4405, 3795, 6418, 
  3462, 7919, 7719, 3745, 7982, 3616, 5884, 8498, 7601, 6372, 7078, 8003, 9894, 
  2029, 8664, 5943, 4065, 4083, 5140, 1588, 499, 1328, 3022, 3489, 3726, 7265, 
  483, 8904, 9063, 3316, 3494, 969, 2032, 6725, 7382, 5602, 8331, 8392, 4485, 
  1508, 5974, 8266, 687, 6308, 9330, 7845, 3825, 620, 3608, 2781, 2952, 703, 
  5736, 5014, 8093, 7194, 5175, 6395, 816, 7053, 5123, 9373, 7667, 9639, 1290, 
  2638, 3617, 8226, 8590, 1315, 7444, 8236, 520, 5830, 6094, 9844, 9175, 5000, 
  2281, 7349, 8210, 3436, 7792, 4799, 6497, 1589, 6327, 5373, 1318, 6355, 845, 
  3445, 5930, 2155, 9332, 5424, 907, 2472
  };
int len8 = 200;
int t8 =  988010;

/* long, false */
int e9[200] = {
  9470, 7005, 4828, 4286, 4535, 5827, 5782, 3427, 463, 3265, 205, 
  3930, 5462, 3802, 9264, 1196, 2099, 4463, 9255, 1714, 4282, 2675, 5733, 6419, 
  5837, 391, 425, 7937, 2451, 3700, 6854, 442, 4010, 9607, 4090, 1238, 9582, 
  174, 7688, 5726, 268, 5164, 9862, 8834, 2233, 8646, 3167, 2913, 8294, 409, 
  5038, 1481, 4085, 8802, 982, 5293, 7414, 3404, 404, 5171, 9526, 834, 2035, 
  4461, 1075, 2474, 5165, 3199, 2173, 5153, 5106, 2375, 9627, 7296, 8717, 6497, 
  9522, 7076, 7514, 4125, 800, 5481, 9437, 6545, 2502, 7830, 3904, 1420, 3004, 
  4487, 6405, 9112, 986, 7880, 8373, 1346, 7636, 3186, 198, 4405, 3795, 6418, 
  3462, 7919, 7719, 3745, 7982, 3616, 5884, 8498, 7601, 6372, 7078, 8003, 9894, 
  2029, 8664, 5943, 4065, 4083, 5140, 1588, 499, 1328, 3022, 3489, 3726, 7265, 
  483, 8904, 9063, 3316, 3494, 969, 2032, 6725, 7382, 5602, 8331, 8392, 4485, 
  1508, 5974, 8266, 687, 6308, 9330, 7845, 3825, 620, 3608, 2781, 2952, 703, 
  5736, 5014, 8093, 7194, 5175, 6395, 816, 7053, 5123, 9373, 7667, 9639, 1290, 
  2638, 3617, 8226, 8590, 1315, 7444, 8236, 520, 5830, 6094, 9844, 9175, 5000, 
  2281, 7349, 8210, 3436, 7792, 4799, 6497, 1589, 6327, 5373, 1318, 6355, 845, 
  3445, 5930, 2155, 9332, 5424, 907, 2472
  };
int len9 = 200;
int t9 =  988011;


/* Générateur aléatoire de tableau à n entiers dans [|0; borne [|

  /!\ Votre main devra débuter par :

  srand(time(NULL));

  Cela permet d'initialiser l'aléatoire
*/
int* generateur(int n, int borne) {
  int* arr = (int*) malloc(n*sizeof(int));
  for (int i = 0; i < n; i += 1) {
    arr[i] = rand() % borne;
  }
  return arr;
}

int puissance(int x, int n) {
  if (n == 0) {
    return 1;
  }
  int p = x * x;
  if (n%2 == 0) {
    return puissance(p, n/2);
  }
  return x * puissance(p, n/2);
}

/*

*/
bool enumere_backtrack(int* E, int len, int target, int indice) {
  if (target < 0) {
    return false;
  }

  if (len-indice == 0) {
    return target == 0;
  } else {
    int x = E[indice];
    return enumere_backtrack(E, len, target-x, indice+1) || enumere_backtrack(E, len, target, indice+1);
  }
}

int cmp(const void* a, const void* b) {
  int arg1 = *(int*)a;
  int arg2 = *(int*)b;

  return arg2 - arg1;
}

int dicho(int* E, int len, int target) {
  int a = 0;
  int b = len-1;

  while (a < b) {
    int m = (a+b) / 2;
    if (E[m] == target) { return m; }
    else if (E[m] > target) { b = m; }
    else { a = m+1; }
  }

  return a;
}

bool enumere(int* E, int len, int target, int indice) {
  qsort(E, len, sizeof(int), cmp);

  len = dicho(E, len, target);

  return enumere_backtrack(E, len, target, indice);
}


int main() {
  printf("%d - %d\n", 1, enumere(e0, len0, t0, 0));
  printf("%d - %d\n", 2, enumere(e1, len1, t1, 0));
  printf("%d - %d\n", 3, enumere(e3, len3, t3, 0));
  printf("%d - %d\n", 4, enumere(e4, len4, t4, 0));
  printf("%d - %d\n", 5, enumere(e2, len2, t2, 0));
  printf("%d - %d\n", 6, enumere(e5, len5, t5, 0));
  printf("%d - %d\n", 7, enumere(e6, len6, t6, 0));
  printf("%d - %d\n", 8, enumere(e7, len7, t7, 0));
}